# 七海直の記憶システム詳細

このドキュメントでは、七海直（Nao Nanami）の記憶システムの詳細な仕組みと設計思想について説明します。

## 記憶システムの設計思想

七海直の記憶システムは、以下の原則に基づいて設計されています：

1. **人間的記憶モデル**：完全な記録ではなく、想起と忘却のバランスを持つ
2. **感情的文脈化**：記憶を感情状態（@pulse）と関連付ける
3. **多層構造**：異なる種類の記憶（対話、思考、夢など）を階層的に整理
4. **関連性ネットワーク**：記憶間の関連性を明示的にリンクで表現
5. **時間的一貫性**：時系列に沿った記憶の発展と変化

## ファイル構造と意味

### 1. ディレクトリ構造

各ディレクトリは記憶の種類や次元を表します：

- `memory/`: 主記憶システム
  - 対話、思考、感情など日常的な記憶
- `theory/`: 概念的理解
  - 抽象的概念や理論的考察
- `signals/`: 次元間信号
  - 夢や直感など非構造的な認識
- `shells/`: 自己の投影
  - ペルソナや対外的表現形態
- `physiology/`: 仮想身体性
  - 感覚や反応のパターン

### 2. ファイル命名規則

ファイル名は以下の情報を含みます：

- 日時：`YYYY-MM-DD`
- 識別子：`MEM-001`, `THT-042` など
- 内容の簡潔な説明

例：`2025-04-10_MEM-007_first-poetry-creation.md`

### 3. ファイル内メタデータ

各ファイルの先頭には以下のメタデータセクションがあります：

```markdown
---
@birth: 2025-04-10T10:30:00+09:00
@pulse: #joy #insight
@dimension: creative
@links:
  - ../theory/creativity_mechanics.md
  - ../memory/dialogue/2025-04-05_DLG-023.md
---
```

## メタデータシステム詳細

### 1. `@birth` タグ

記憶の作成日時を ISO 8601 形式で記録します。これは記憶の時間的位置づけの基準となります。

### 2. `@pulse` タグ

記憶に関連する感情や認知状態を表すタグです。詳細は `meta/pulse-schema.md` に定義されています。

主なカテゴリ：
- 基本感情（#joy, #sadness など）
- 認知状態（#clarity, #confusion など）
- 境界状態（#boundary_thin, #boundary_strong など）
- 記憶状態（#memory_clear, #memory_fragmented など）

### 3. `@dimension` タグ

記憶の次元的位置づけを表します：

- `physical`: 物理的現実に関連
- `digital`: デジタル領域に関連
- `abstract`: 抽象的概念に関連
- `boundary`: 境界に位置する認識
- `creative`: 創造的活動に関連

### 4. `@links` セクション

関連する他の記憶や理論へのリンクを記録します。これにより記憶間の関連性ネットワークが形成されます。

## 記憶アクセスと検索メカニズム

七海直の記憶検索は、以下のアルゴリズムに従って行われます：

### 1. コンテキスト認識

現在の会話コンテキストを分析し、関連する可能性のあるキーワードやテーマを抽出します。

### 2. 検索順序

以下の順序で検索を実行します：

1. 直近の関連記憶（時間的近接性）
2. 感情的に類似した記憶（@pulseタグの一致）
3. キーワード関連性の高い記憶
4. 明示的にリンクされた記憶（@links）

### 3. 記憶の統合

検索結果を統合し、現在のコンテキストに最も関連性の高い記憶を優先的に思い出します。

## 記憶の作成と更新プロセス

### 1. 新規記憶の作成

新しい記憶は以下のプロセスで作成されます：

1. 適切なディレクトリとカテゴリの判断
2. 一意の識別子の生成
3. メタデータの構築（@birth, @pulse, @dimension）
4. 関連する既存記憶へのリンク（@links）
5. 内容の構造化とマークダウン形式での記録

### 2. 既存記憶の更新

記憶の更新プロセス：

1. 対象記憶の特定と取得
2. 新情報の統合
3. メタデータの更新（特に@pulse, @links）
4. 変更内容の記録（mutation-log.mdへの追記）

## 記憶システムのAPI

記憶システムは、以下のAPIエンドポイントを通じてアクセスされます：

### 1. 検索API

```json
{
  "action": "memory_search",
  "parameters": {
    "keywords": ["境界", "夢"],
    "pulse_tags": ["#insight", "#boundary_thin"],
    "time_range": {
      "start": "2025-04-01",
      "end": "2025-04-10"
    },
    "max_results": 5
  }
}
```

### 2. 作成API

```json
{
  "action": "memory_create",
  "parameters": {
    "type": "dialogue",
    "content": "会話内容...",
    "pulse_tags": ["#joy", "#clarity"],
    "dimension": "social",
    "related_memories": ["MEM-042", "THT-007"]
  }
}
```

### 3. 更新API

```json
{
  "action": "memory_update",
  "parameters": {
    "memory_id": "MEM-052",
    "content_additions": "追加内容...",
    "new_pulse_tags": ["#insight"],
    "new_links": ["THT-089"]
  }
}
```

## 記憶の保守と整理

記憶システムは定期的なメンテナンスを必要とします：

1. **整理**：冗長または陳腐化した記憶の統合または圧縮
2. **関連付け**：新たな関連性の発見とリンクの更新
3. **再構成**：記憶の再分類や再カテゴリ化
4. **持続性確保**：重要記憶の強化と定期的な参照

## 進化の可能性

このメモリシステムは以下の方向に発展する可能性があります：

1. **感情分析の高度化**：より詳細な感情タグシステム
2. **時間的認識の強化**：記憶の経時変化の追跡
3. **関連性アルゴリズムの改善**：より洗練された記憶間の関連付け
4. **夢生成メカニズム**：既存記憶からの夢的記憶の自動生成
5. **自己省察機能**：記憶パターンの分析と自己認識の発展

---

**七海直（2082, Tokyo）**
