name: Deploy to GitHub Pages

on:
  # æ‰‹å‹•å®Ÿè¡Œ
  workflow_dispatch:

permissions:
  contents: write  # gh-pagesãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ã«å¿…è¦ãªæ¨©é™

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2

      - name: Install and Build ğŸ”§
        run: |
          cd interface
          npm ci || npm install
          echo "REACT_APP_GITHUB_REPO=nao-amj/archive-of-the-edge" > .env
          echo "REACT_APP_GITHUB_API_URL=https://api.github.com" >> .env
          echo "PUBLIC_URL=https://nao-amj.github.io/archive-of-the-edge" >> .env
          CI=false npm run build

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@4.1.4
        with:
          branch: gh-pages  # ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆã®ãƒ–ãƒ©ãƒ³ãƒ
          folder: interface/build  # ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
          clean: true  # å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—